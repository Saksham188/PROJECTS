"use strict";(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[197],{4765:function(n,e,r){r.r(e),r.d(e,{default:function(){return K}});var t,a=r(168),i=r(4165),s=r(5861),c=r(9439),o=r(2791),d=r(6444),l=r(3263),u=r(7689),m=r(8204),f=r(6571),h=r(184);function g(n){var e=n.contacts,r=n.currentUser,t=n.changeChat,a=(0,o.useState)(void 0),i=(0,c.Z)(a,2),s=i[0],d=i[1],l=(0,o.useState)(void 0),u=(0,c.Z)(l,2),m=u[0],g=u[1],p=(0,o.useState)(void 0),v=(0,c.Z)(p,2),b=v[0],j=v[1];(0,o.useEffect)((function(){r&&(g(r.avatarImage),d(r.username))}),[r]);return(0,h.jsx)(h.Fragment,{children:m&&s&&(0,h.jsxs)(x,{children:[(0,h.jsxs)("div",{className:"brand",children:[(0,h.jsx)("img",{src:f.Z,alt:"Logo"}),(0,h.jsx)("h3",{children:"Snapp"})]}),(0,h.jsx)("div",{className:"contacts",children:e.map((function(n,e){return(0,h.jsxs)("div",{className:"contact ".concat(e===b?"selected":""),onClick:function(){return function(n,e){j(n),t(e)}(e,n)},children:[(0,h.jsx)("div",{className:"avatar",children:(0,h.jsx)("img",{src:"data:image/svg+xml;base64,".concat(n.avatarImage),alt:"avatar"})}),(0,h.jsx)("div",{className:"username",children:(0,h.jsx)("h3",{children:n.username})})]},e)}))}),(0,h.jsxs)("div",{className:"current-user",children:[(0,h.jsx)("div",{className:"avatar",children:(0,h.jsx)("img",{src:"data:image/svg+xml;base64,".concat(m),alt:"avatar"})}),(0,h.jsx)("div",{className:"username",children:(0,h.jsx)("h2",{children:s})})]})]})})}var p,x=d.ZP.div(t||(t=(0,a.Z)(["\n  display: grid;\n  grid-template-rows: 10% 75% 15%;\n  overflow: hidden;\n  background-color: #080420;\n\n  .brand {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    justify-content: center;\n\n    img {\n      height: 2rem;\n    }\n    h3 {\n      color: white;\n      text-transform: uppercase;\n    }\n  }\n  .contacts {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    overflow: auto;\n    gap: 0.8rem;\n\n    // now to style the scrollbar\n    &::-webkit-scrollbar {\n      width: 0.2rem;\n\n      &-thumb {\n        background-color: #ffffff39;\n        width: 0.1rem;\n        border-radius: 1rem;\n      }\n    }\n    .contact {\n      background-color: #ffffff34;\n      min-height: 5rem;\n      cursor: pointer;\n      width: 90%;\n      border-radius: 0.2rem;\n      padding: 0.4rem;\n      display: flex;\n      gap: 1rem;\n      align-items: center;\n      transition: 0.5s ease-in-out;\n      .avatar {\n        img {\n          height: 3rem;\n        }\n      }\n      .username {\n        h3 {\n          color: white;\n        }\n      }\n    }\n    .selected {\n      background-color: #9a86f3;\n    }\n  }\n  .current-user {\n    background-color: #0d0d30;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 2rem;\n    .avatar {\n      img {\n        height: 4rem;\n        max-inline-size: 100%;\n      }\n    }\n    .username {\n      h2 {\n        color: white;\n      }\n    }\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n      gap: 0.5rem;\n      .username {\n        h2 {\n          font-size: 1rem;\n        }\n      }\n    }\n  }\n"]))),v=r.p+"static/media/robot.0617a41936621e9697cd.gif";function b(n){var e=n.currentUser;return(0,h.jsxs)(w,{children:[(0,h.jsx)("img",{src:v,alt:"Robot"}),(0,h.jsxs)("h1",{children:["Hi Welcome, ",(0,h.jsxs)("span",{children:[e?e.username:"","!"]})]}),(0,h.jsx)("h3",{children:"Please select a chat to Start Messanging."})]})}var j,w=d.ZP.div(p||(p=(0,a.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: white;\n  flex-direction: column;\n  img {\n    height: 20rem;\n  }\n  span {\n    color: #4e0eff;\n  }\n"]))),k=r(3433),Z=r(2975),y=r.n(Z),S=r(4373),N=r(9126);function C(n){var e=n.handleSendMsg,r=(0,o.useState)(!1),t=(0,c.Z)(r,2),a=t[0],i=t[1],s=(0,o.useState)(""),d=(0,c.Z)(s,2),l=d[0],u=d[1];return(0,h.jsxs)(E,{children:[(0,h.jsx)("div",{className:"button-container",children:(0,h.jsxs)("div",{className:"emoji",children:[(0,h.jsx)(N.IZ1,{onClick:function(){i(!a)}}),a&&(0,h.jsx)(y(),{onEmojiClick:function(n,e){var r=l;r+=e.emoji,u(r)}})]})}),(0,h.jsxs)("form",{className:"input-container",onSubmit:function(n){return n.preventDefault(),void(l.length>0&&(e(l),u("")))},children:[(0,h.jsx)("input",{type:"text",placeholder:"Type your message!!",value:l,onChange:function(n){return u(n.target.value)}}),(0,h.jsx)("button",{type:"submit",children:(0,h.jsx)(S.ghy,{})})]})]})}var _,E=d.ZP.div(j||(j=(0,a.Z)(["\n  display: grid;\n  align-items: center;\n  grid-template-columns: 5% 95%;\n  background-color: #080420;\n  padding: 0 2rem;\n  padding-bottom: 0.3rem;\n\n  @media screen and (min-width: 720px) and (max-width: 1080px) {\n    padding: 0 1rem;\n    gap: 1rem;\n  }\n\n  .button-container {\n    display: flex;\n    align-items: center;\n    color: white;\n    gap: 1rem;\n\n    .emoji {\n      position: relative;\n      svg {\n        font-size: 1.5rem;\n        color: #ffff00c8;\n        cursor: pointer;\n      }\n      .emoji-picker-react {\n        position: absolute;\n        top: -350px;\n        background-color: #080420;\n        box-shadow: 0 5px 10px #9a86f3;\n        border-color: #9a86f3;\n       \n        .emoji-scroll-wrapper::-webkit-scrollbar {\n          background-color: #080420;\n          width: 5px;\n          &-thumb {\n            background-color: #9a86f3;\n          }\n        }\n        .emoji-categories {\n          button {\n            filter: contrast(0);\n          }\n        }\n        .emoji-search {\n          background-color: transparent;\n          color: white;\n          border-color: #9a86f3;\n        }\n        .emoji-group:before {\n          background-color: #080420;\n        }\n      }\n    }\n  }\n  .input-container {\n    width: 100%;\n    border-radius: 2rem;\n    display: flex;\n    align-items: center;\n    gap: 2rem;\n    background-color: #ffffff34;\n    input {\n      width: 90%;\n      height: 60%;\n      background-color: transparent;\n      color: white;\n      border: none;\n      padding-left: 1rem;\n      font-size: 1.2rem;\n      &::selection {\n        background-color: #9a86f3;\n      }\n      &:focus {\n        outline: none;\n      }\n    }\n    button {\n      padding: 0.3rem 2rem;\n      cursor: pointer;\n      border-radius: 2rem;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background-color: #9a86f3;\n      :hover{\n        background-color:#9a36f3;\n      }\n      border: none;\n      @media screen and (min-width: 720px) and (max-width: 1080px) {\n        padding: 0.3rem 1rem;\n        svg {\n          font-size: 1rem;\n        }\n      }\n      svg {\n        font-size: 2rem;\n        color: white;\n      }\n    }\n  }\n"]))),z=r(7692);function I(){var n=(0,u.s0)(),e=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.clear(),n("/login");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsx)(U,{onClick:e,children:(0,h.jsx)(z.t7h,{})})}var P,U=d.ZP.button(_||(_=(0,a.Z)(["\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.5rem;\n  border-radius: 0.5rem;\n  background-color: #9a86f3;\n  border: none;\n  cursor: pointer;\n  :hover\n  {\n    background-color:#9a36f3;\n  }\n  svg {\n    font-size: 1.3rem;\n    color: #ebe7ff;\n  }\n  "])));d.ZP.div(P||(P=(0,a.Z)(["\n\n   height:80%;\n\n"])));var M,R=r(4261);function A(n){var e=n.currentChat,r=n.currentUser,t=n.socket,a=(0,o.useState)([]),d=(0,c.Z)(a,2),u=d[0],f=d[1],g=(0,o.useState)(null),p=(0,c.Z)(g,2),x=p[0],v=p[1],b=(0,o.useRef)();(0,o.useEffect)((function(){var n=function(){var n=(0,s.Z)((0,i.Z)().mark((function n(){var t;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return n.next=3,l.Z.post(m.Ds,{from:r._id,to:e._id});case 3:t=n.sent,f(t.data);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e]);var j=function(){var n=(0,s.Z)((0,i.Z)().mark((function n(a){var s;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.Z.post(m.JC,{from:r._id,to:e._id,message:a});case 2:t.current.emit("send-msg",{to:e._id,from:r._id,message:a}),(s=(0,k.Z)(u)).push({fromSelf:!0,message:a}),f(s);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,o.useEffect)((function(){t.current&&t.current.on("msg-receive",(function(n){v({fromSelf:!1,message:n})}))}),[]),(0,o.useEffect)((function(){x&&f((function(n){return[].concat((0,k.Z)(n),[x])}))}),[x]),(0,o.useEffect)((function(){var n;null===(n=b.current)||void 0===n||n.scrollIntoView({behaviour:"smooth"})}),[u]),(0,h.jsx)(h.Fragment,{children:e&&(0,h.jsxs)(F,{children:[(0,h.jsxs)("div",{className:"chat-header",children:[(0,h.jsxs)("div",{className:"user-details",children:[(0,h.jsx)("div",{className:"avatar",children:(0,h.jsx)("img",{src:"data:image/svg+xml;base64,".concat(e.avatarImage),alt:"avatar"})}),(0,h.jsx)("div",{className:"username",children:(0,h.jsx)("h3",{children:e.username})})]}),(0,h.jsx)(I,{})]}),(0,h.jsx)("div",{className:"chat-messages",children:u.map((function(n){return(0,h.jsx)("div",{ref:b,children:(0,h.jsx)("div",{className:"message ".concat(n.fromSelf?"sended":"received"),children:(0,h.jsx)("div",{className:"content",children:(0,h.jsx)("p",{children:n.message})})})},R.Z)}))}),(0,h.jsx)(C,{handleSendMsg:j})]})})}var D,F=d.ZP.div(M||(M=(0,a.Z)(["\n  padding-top: 0.2rem;\n  display: grid;\n  grid-template-rows: 10% 80% 10%;\n  gap: 0.1rem;\n  overflow: hidden;\n  @media screen and (min-width: 720px) and (max-width: 1080px) {\n    grid-template-rows: 15% 70% 15%;\n  }\n  .chat-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 2rem;\n\n    .user-details {\n      display: flex;\n      align-items: center;\n      gap: 1rem;\n\n      .avatar {\n        img {\n          height: 3rem;\n        }\n      }\n\n      .username {\n        h3 {\n          color: white;\n        }\n      }\n    }\n  }\n  .chat-messages {\n    padding: 1rem 2rem;\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    overflow: auto;\n    &::-webkit-scrollbar {\n      width: 0.2rem;\n      &-thumb {\n        background-color: #ffffff39;\n        width: 0.1rem;\n        border-radius: 1rem;\n      }\n    }\n    .message {\n      display: flex;\n      align-items: center;\n      .content {\n        max-width: 40%;\n        overflow-wrap: break-word;\n        padding: 1rem;\n        font-size: 1.1rem;\n        border-radius: 1rem;\n        color: #d1d1d1;\n        @media screen and (min-width: 720px) and (max-width: 1080px) {\n          max-width: 70%;\n        }\n      }\n    }\n    .sended {\n      justify-content: flex-end;\n      .content {\n        background-color: #4f04ff21;\n      }\n    }\n    .recieved {\n      justify-content: flex-start;\n      .content {\n        background-color: #9900ff20;\n      }\n    }\n  }\n"]))),J=r(4428);var H=d.ZP.div(D||(D=(0,a.Z)(["\n  height: 100vh;\n  width: 100vw;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 1rem;\n  align-items: center;\n  background-color: #131324;\n\n  .container {\n    height: 85vh;\n    width: 85vw;\n    background-color: #00000076;\n    display: grid;\n    grid-template-columns: 25% 75%;\n    // ie 25% contact section and 75% chat section\n\n    // making responsive for tablet mode\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n      grid-template-columns: 35% 65%; \n    }\n  }\n"]))),K=function(){var n=(0,o.useRef)(),e=(0,u.s0)(),r=(0,o.useState)([]),t=(0,c.Z)(r,2),a=t[0],d=t[1],f=(0,o.useState)(void 0),p=(0,c.Z)(f,2),x=p[0],v=p[1],j=(0,o.useState)(void 0),w=(0,c.Z)(j,2),k=w[0],Z=w[1],y=(0,o.useState)(!1),S=(0,c.Z)(y,2),N=S[0],C=S[1];return(0,o.useEffect)((function(){var n=function(){var n=(0,s.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(localStorage.getItem("chat-app-user")){n.next=4;break}e("/login"),n.next=10;break;case 4:return n.t0=v,n.next=7,JSON.parse(localStorage.getItem("chat-app-user"));case 7:n.t1=n.sent,(0,n.t0)(n.t1),C(!0);case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]),(0,o.useEffect)((function(){x&&(n.current=(0,J.io)(m.ho),n.current.emit("add-user",x._id))}),[x]),(0,o.useEffect)((function(){var n=function(){var n=(0,s.Z)((0,i.Z)().mark((function n(){var r;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!x){n.next=9;break}if(!x.isAvatarImageSet){n.next=8;break}return n.next=4,l.Z.get("".concat(m.pK,"/").concat(x._id));case 4:r=n.sent,d(r.data),n.next=9;break;case 8:e("/setAvatar");case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[x]),(0,h.jsx)(H,{children:(0,h.jsxs)("div",{className:"container",children:[(0,h.jsx)(g,{contacts:a,currentUser:x,changeChat:function(n){Z(n)}}),N&&void 0===k?(0,h.jsx)(b,{currentUser:x}):(0,h.jsx)(A,{currentChat:k,currentUser:x,socket:n})]})})}}}]);
//# sourceMappingURL=197.100c3307.chunk.js.map